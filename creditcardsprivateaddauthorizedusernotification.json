{
    "swagger": "2.0",
    "info": {
        "title": "Credit Cards Private Add Authorized User Notification",
        "description": "This API will notify Costco Canada of the new authorized user on account. This API publishes the message to ISM which will then be used to notify Costco Canada at near real time. The POST method on this API will push the AMQP message to ISM costcopartnerships exchange which wil be retrieved by the Consumer and make a call to Costco and trigger a 50007 event which signifies an authorized user has been added to the Costco Canada account.",
        "version": "1.0",
        "contact": {
            "name": "PLASMA",
            "email": "PLASMA@capitalone.com"
        },
        "license": {
            "name": "Capital One Proprietary",
            "url": "http://www.capitalone.com/license_path"
        }
    },
    "schemes": [
        "https"
    ],
    "consumes": [
        "application/xml; v=1",
        "application/json; v=1"
    ],
    "produces": [
        "application/xml",
        "application/json"
    ],
    "tags": [
        {
            "name": "credit cards"
        },
        {
            "name": "Canada"
        },
        {
            "name": "add authorized user"
        },
        {
            "name": "costco"
        },
        {
            "name": "inter-service messaging"
        }
    ],
    "parameters": {
        "userId": {
            "in": "query",
            "name": "User-Id",
            "description": "Unique identifier of the end user making the request. This could be a customer service representative, or the customer themselves. Used for audit purposes. (e.g. abc123)",
            "required": true,
            "type": "string",
            "default": "NCT532"
        },
        "clientCorrelationId": {
            "in": "header",
            "name": "Client-Correlation-Id",
            "description": "The correlation Id is used for logging the information needed for tracking the client session and the sequence of operations performed by the client.",
            "required": true,
            "type": "string"
        }
    },
    "paths": {
        "/private/asvcostconewaccountnotify/credit-cards/costco/add-authorized-user-notify": {
            "post": {
                "summary": "Update Costco of the new authorized user on account.",
                "description": "This API updates the costco canada with new authorized user information on the card.\n",
                "parameters": [
                    {
                        "$ref": "#/parameters/userId"
                    },
                    {
                        "$ref": "#/parameters/clientCorrelationId"
                    },
                    {
                        "name": "body",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/CostcoNotifyRequest"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Update Successful.",
                        "schema": {
                            "$ref": "#/definitions/CostcoNotifyResponse"
                        }
                    },
                    "400": {
                        "description": "Request Validaton Error.\nStandard error structure:\n\n| `id` | Description |\n| ---  | --- |\n| 101 | Card Number is invalid or missing.|\n| 102 | Postal Code is invalid or missing.|\n| 103 | Card Expiration Date is invalid or missing.|\n| 104 | Partner Membership ID is missing or invalid.|\n| 105 | Surrogate Card ID is missing or invalid.|\n",
                        "schema": {
                            "$ref": "#/definitions/ErrorResponse"
                        }
                    },
                    "500": {
                        "description": "Server error.",
                        "schema": {
                            "$ref": "#/definitions/ErrorResponse"
                        }
                    }
                }
            }
        }
    },
    "definitions": {
        "CostcoNotifyRequest": {
            "required": [
                "cardNumber",
                "postalCode",
                "cardExpirationDate",
                "partnerMembershipId",
                "surrogateCardId"
            ],
            "properties": {
                "surrogateCardId": {
                    "description": "The surrogateCardId is a clear text value that can be used in place of the card number for interprocess communication. This element can be used in transactions with non-Capital One Systems to identify a specific card without having to consider PCI compliance issues.",
                    "type": "string"
                },
                "cardNumber": {
                    "description": "Denotes the number unique to a card. This is the embossed card number.",
                    "minLength": 16,
                    "maxLength": 16,
                    "type": "string"
                },
                "cardExpirationDate": {
                    "type": "string",
                    "description": "Denotes the month and year when the card will expire. This is typically embossed on the card. Format:- MM/YY"
                },
                "postalCode": {
                    "description": "The postal code. For Canadian addresses this should confom to the A1A1A1 format. For US, this should be populated with a five digit US zip code. Example= 60008, L5P1B2",
                    "type": "string"
                },
                "partnerMembershipId": {
                    "description": "Represents the individual's membership number provided by the merchant for both primary and secondary users.",
                    "type": "string"
                }
            }
        },
        "CostcoNotifyResponse": {
            "properties": {
                "message": {
                    "description": "Success response message",
                    "type": "string"
                }
            }
        },
        "ErrorResponse": {
            "description": "Error Response for Enterprise APIs",
            "properties": {
                "id": {
                    "description": "Identifier for the error",
                    "type": "integer"
                },
                "developerText": {
                    "description": "Developer message for the error",
                    "type": "string"
                }
            }
        }
    }
}